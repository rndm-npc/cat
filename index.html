<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Preference Swiper</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root{
            --bg-1: #fff7fb;
            --bg-2: #fef6e7;
            --accent: #ff9ac2;
            --accent-2: #ffd6a5;
            --muted: #6b7280;
            --card-shadow: 0 12px 30px rgba(99, 102, 241, 0.08);
            --glass: rgba(255,255,255,0.6);
        }

        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
            font-family: 'Nunito', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: radial-gradient(1200px 600px at 10% 10%, var(--bg-1), transparent 10%),
                        radial-gradient(1000px 500px at 90% 90%, var(--bg-2), transparent 12%),
                        linear-gradient(180deg,#fff 0%, #fffefb 100%);
            color: #2d3748;
            display:flex;align-items:flex-start;justify-content:center;padding:28px 16px;
        }

        .container{width:100%;max-width:440px;min-height:80vh;display:flex;flex-direction:column;align-items:center;gap:14px;position:relative}

        h1{font-size:1.7rem;color:#2b3440;letter-spacing:0.2px;font-weight:800;display:flex;align-items:center;gap:10px}
        .subtitle{font-size:0.95rem;color:var(--muted);margin-top:4px}

        /* Card stack */
        .card-stack{width:100%;height:68%;position:relative;display:flex;align-items:center;justify-content:center}

        .card{width:92%;height:86%;background:linear-gradient(180deg,#fff,#fffefc);border-radius:22px;position:absolute;overflow:hidden;box-shadow:var(--card-shadow);transition:transform .35s cubic-bezier(.22,.9,.34,1),box-shadow .2s;cursor:grab}
        .card:active{cursor:grabbing}
        .card img{width:100%;height:78%;object-fit:cover;display:block}
        .card-info{height:22%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px;background:linear-gradient(180deg, rgba(255,255,255,0.0), rgba(255,255,255,0.6));color:#374151;font-weight:700}

        .sticker{position:absolute;top:12px;left:12px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:6px 10px;border-radius:999px;font-weight:800;font-size:13px;box-shadow:0 6px 16px rgba(255,138,160,0.18)}

        /* Indicators */
        .swipe-indicator{position:absolute;top:18px;padding:10px 14px;border-radius:20px;font-weight:800;opacity:0;transition:opacity .18s, transform .18s;z-index:11;color:white}
        .like-indicator{right:18px;background:linear-gradient(90deg,#ff8ab8,#ffb18a)}
        .dislike-indicator{left:18px;background:linear-gradient(90deg,#98e6ff,#b6ffda)}

        /* Buttons row */
        .action-buttons{display:flex;gap:20px;margin-top:6px;width:100%;justify-content:center}
        .action-button{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;border:none;box-shadow:0 8px 20px rgba(16,24,40,0.06);transition:transform .15s,box-shadow .15s;cursor:pointer}
        .action-button:active{transform:scale(.96)}
        .dislike-btn{background:linear-gradient(180deg,#fff,#fff);color:#ff7aa2}
        .like-btn{background:linear-gradient(180deg,#fff,#fff);color:#ff6b84}

        /* Summary */
        .summary-screen{width:100%;height:100%;background:linear-gradient(180deg,#fff,#fffefc);border-radius:18px;padding:18px;box-shadow:var(--card-shadow);display:none;flex-direction:column;align-items:center;overflow:auto}
        .summary-title{margin-bottom:10px;color:#2b3440}

        .liked-cats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;width:100%}
        .liked-cat{border-radius:10px;overflow:hidden;box-shadow:0 6px 18px rgba(41,45,50,0.06)}

        .restart-btn{margin-top:18px;padding:12px 26px;background:linear-gradient(90deg,#ff9ac2,#ffd6a5);border:none;border-radius:999px;color:white;font-weight:800;cursor:pointer}

        .progress-bar{width:90%;height:8px;background:rgba(15,23,42,0.06);border-radius:999px;margin-top:4px;overflow:hidden}
        .progress{height:100%;background:linear-gradient(90deg,#ff9ac2,#ffd6a5);width:0%;transition:width .28s}

        .instructions{text-align:center;margin-top:6px;color:var(--muted);font-size:13px}

        /* small responsive tweaks */
        @media (max-width:480px){.card{height:80%}.action-button{width:60px;height:60px;font-size:26px}h1{font-size:1.4rem}}

        /* playful floating cat in the corner */
        .corner-cat{position:absolute;top:-12px;right:-6px;font-size:42px;filter:drop-shadow(0 6px 12px rgba(0,0,0,0.06));opacity:.9}
    </style>
</head>
<body>
    <h1>üê± Purrfect Picks <span class="corner-cat">üêæ</span></h1>
    <p class="subtitle">Find your purr-fect match ‚Äî swipe or tap to choose!</p>
    <div class="container">
        <div class="card-stack" id="cardStack">
            <div class="swipe-indicator like-indicator">LIKE</div>
            <div class="swipe-indicator dislike-indicator">DISLIKE</div>
            <!-- Cards will be dynamically inserted here -->
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <p class="instructions">Swipe, drag, or tap the buttons to pick your favorites ‚ù§Ô∏èüêæ</p>
        
        <div class="action-buttons">
            <button class="action-button dislike-btn" id="dislikeBtn" aria-label="Nope">üôÄ</button>
            <button class="action-button like-btn" id="likeBtn" aria-label="Like">üíñ</button>
        </div>
        
        <div class="summary-screen" id="summaryScreen">
            <h2 class="summary-title">Your Cat Preferences</h2>
            <p id="summaryText">You liked <span id="likedCount">0</span> out of <span id="totalCount">0</span> cats</p>
            <div class="liked-cats-grid" id="likedCatsGrid">
                <!-- Liked cats will be displayed here -->
            </div>
            <button class="restart-btn" id="restartBtn">Start Over</button>
        </div>
    </div>

    <script>
        // Configuration
        const TOTAL_CATS = 10;
        const CATAAS_API_URL = 'https://cataas.com/cat?json=true';
        
        // State management
        let cats = [];
        let currentIndex = 0;
        let likedCats = [];
        let startX = 0;
        let currentX = 0;
        let isDragging = false;
        
        // DOM elements
        const cardStack = document.getElementById('cardStack');
        const progressBar = document.getElementById('progress');
        const likeBtn = document.getElementById('likeBtn');
        const dislikeBtn = document.getElementById('dislikeBtn');
        const summaryScreen = document.getElementById('summaryScreen');
        const likedCount = document.getElementById('likedCount');
        const totalCount = document.getElementById('totalCount');
        const likedCatsGrid = document.getElementById('likedCatsGrid');
        const restartBtn = document.getElementById('restartBtn');
        const likeIndicator = document.querySelector('.like-indicator');
        const dislikeIndicator = document.querySelector('.dislike-indicator');
        
        // Initialize the app
        async function init() {
            await loadCats();
            createCards();
            updateProgress();
            setupEventListeners();
        }
        
        // Fetch cat images from CATAAS API
        async function loadCats() {
            try {
                // We'll fetch multiple cat images
                const promises = [];
                for (let i = 0; i < TOTAL_CATS; i++) {
                    promises.push(fetch(CATAAS_API_URL).then(response => response.json()));
                }
                
                const results = await Promise.all(promises);
                cats = results.map(result => ({
                    id: result.id,
                    url: `https://cataas.com/cat/${result.id}`
                }));
            } catch (error) {
                console.error('Error loading cats:', error);
                // Fallback to placeholder images if API fails
                cats = Array(TOTAL_CATS).fill().map((_, i) => ({
                    id: i,
                    url: `https://placekitten.com/400/500?image=${i}`
                }));
            }
        }
        
        // Create card elements for each cat
        function createCards() {
            cardStack.innerHTML = `
                <div class="swipe-indicator like-indicator">üíñ Purr!</div>
                <div class="swipe-indicator dislike-indicator">üêæ Nope</div>
            `;
            
            cats.forEach((cat, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="sticker">#${index + 1} üêæ</div>
                    <img src="${cat.url}" alt="Cat ${index + 1}" onerror="this.src='https://placekitten.com/400/500?image=${index}'">
                    <div class="card-info">Cat #${index + 1} ‚Äî Purrty!</div>
                `;
                cardStack.appendChild(card);
            });
            
            // Set z-index for proper stacking
            document.querySelectorAll('.card').forEach((card, index) => {
                card.style.zIndex = TOTAL_CATS - index;
            });
        }
        
        // Set up event listeners for swipe and button interactions
        function setupEventListeners() {
            // Touch events for mobile
            cardStack.addEventListener('touchstart', handleTouchStart, { passive: false });
            cardStack.addEventListener('touchmove', handleTouchMove, { passive: false });
            cardStack.addEventListener('touchend', handleTouchEnd);
            
            // Mouse events for desktop
            cardStack.addEventListener('mousedown', handleMouseDown);
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
            
            // Button events
            likeBtn.addEventListener('click', () => handleSwipe('right'));
            dislikeBtn.addEventListener('click', () => handleSwipe('left'));
            restartBtn.addEventListener('click', restartApp);
        }
        
        // Touch event handlers
        function handleTouchStart(e) {
            if (currentIndex >= cats.length) return;
            
            const touch = e.touches[0];
            startX = touch.clientX;
            currentX = startX;
            isDragging = true;
            
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            currentCard.style.transition = 'none';
        }
        
        function handleTouchMove(e) {
            if (!isDragging || currentIndex >= cats.length) return;
            
            e.preventDefault();
            const touch = e.touches[0];
            currentX = touch.clientX;
            
            const deltaX = currentX - startX;
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            
            // Move the card
            currentCard.style.transform = `translateX(${deltaX}px) rotate(${deltaX * 0.1}deg)`;
            
            // Show swipe indicators
            if (deltaX > 50) {
                likeIndicator.style.opacity = Math.min(deltaX / 100, 1);
                dislikeIndicator.style.opacity = 0;
            } else if (deltaX < -50) {
                dislikeIndicator.style.opacity = Math.min(Math.abs(deltaX) / 100, 1);
                likeIndicator.style.opacity = 0;
            } else {
                likeIndicator.style.opacity = 0;
                dislikeIndicator.style.opacity = 0;
            }
        }
        
        function handleTouchEnd() {
            if (!isDragging || currentIndex >= cats.length) return;
            
            isDragging = false;
            const deltaX = currentX - startX;
            
            // Determine if it's a swipe based on distance
            if (Math.abs(deltaX) > 100) {
                handleSwipe(deltaX > 0 ? 'right' : 'left');
            } else {
                // Reset card position if not swiped far enough
                resetCardPosition();
            }
            
            // Hide indicators
            likeIndicator.style.opacity = 0;
            dislikeIndicator.style.opacity = 0;
        }
        
        // Mouse event handlers (for desktop)
        function handleMouseDown(e) {
            if (currentIndex >= cats.length) return;
            
            startX = e.clientX;
            currentX = startX;
            isDragging = true;
            
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            currentCard.style.transition = 'none';
        }
        
        function handleMouseMove(e) {
            if (!isDragging || currentIndex >= cats.length) return;
            
            currentX = e.clientX;
            
            const deltaX = currentX - startX;
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            
            // Move the card
            currentCard.style.transform = `translateX(${deltaX}px) rotate(${deltaX * 0.1}deg)`;
            
            // Show swipe indicators
            if (deltaX > 50) {
                likeIndicator.style.opacity = Math.min(deltaX / 100, 1);
                dislikeIndicator.style.opacity = 0;
            } else if (deltaX < -50) {
                dislikeIndicator.style.opacity = Math.min(Math.abs(deltaX) / 100, 1);
                likeIndicator.style.opacity = 0;
            } else {
                likeIndicator.style.opacity = 0;
                dislikeIndicator.style.opacity = 0;
            }
        }
        
        function handleMouseUp() {
            if (!isDragging || currentIndex >= cats.length) return;
            
            isDragging = false;
            const deltaX = currentX - startX;
            
            // Determine if it's a swipe based on distance
            if (Math.abs(deltaX) > 100) {
                handleSwipe(deltaX > 0 ? 'right' : 'left');
            } else {
                // Reset card position if not swiped far enough
                resetCardPosition();
            }
            
            // Hide indicators
            likeIndicator.style.opacity = 0;
            dislikeIndicator.style.opacity = 0;
        }
        
        // Handle swipe action (like or dislike)
        function handleSwipe(direction) {
            if (currentIndex >= cats.length) return;
            
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            currentCard.style.transition = 'transform 0.5s ease';
            
            // Animate card off screen
            if (direction === 'right') {
                currentCard.style.transform = 'translateX(500px) rotate(30deg)';
                likedCats.push(cats[currentIndex]);
            } else {
                currentCard.style.transform = 'translateX(-500px) rotate(-30deg)';
            }
            
            // Move to next card
            setTimeout(() => {
                currentIndex++;
                updateProgress();
                
                // Check if we've reached the end
                if (currentIndex >= cats.length) {
                    showSummary();
                }
            }, 300);
        }
        
        // Reset card position if not swiped far enough
        function resetCardPosition() {
            const currentCard = document.querySelector(`.card[data-index="${currentIndex}"]`);
            currentCard.style.transition = 'transform 0.3s ease';
            currentCard.style.transform = 'translateX(0) rotate(0)';
        }
        
        // Update progress bar
        function updateProgress() {
            const progress = (currentIndex / cats.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // Show summary screen with liked cats
        function showSummary() {
            cardStack.style.display = 'none';
            document.querySelector('.progress-bar').style.display = 'none';
            document.querySelector('.instructions').style.display = 'none';
            document.querySelector('.action-buttons').style.display = 'none';
            
            likedCount.textContent = likedCats.length;
            totalCount.textContent = cats.length;
            
            // Display liked cats
            likedCatsGrid.innerHTML = '';
            likedCats.forEach(cat => {
                const catElement = document.createElement('div');
                catElement.className = 'liked-cat';
                catElement.innerHTML = `<img src="${cat.url}" alt="Liked cat">`;
                likedCatsGrid.appendChild(catElement);
            });
            
            summaryScreen.style.display = 'flex';
        }
        
        // Restart the app
        function restartApp() {
            currentIndex = 0;
            likedCats = [];
            
            cardStack.style.display = 'block';
            document.querySelector('.progress-bar').style.display = 'block';
            document.querySelector('.instructions').style.display = 'block';
            document.querySelector('.action-buttons').style.display = 'flex';
            summaryScreen.style.display = 'none';
            
            createCards();
            updateProgress();
        }
        
        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>